{
  "patch": "Dynasty Max Tier v4.9",
  "description": "Adds M112A Adaptive Matchup Matrix, M113C Contract Forecast Engine, and Canon Auto-Verify Hook. No Canon edits; additive on top of v4.8.",
  "requires": {
    "canon": "v4.1",
    "architect": "v6.1",
    "base_tag": "v4.8-Gameflow-Guardian"
  },
  "create_dirs": [
    "analytics/opponent",
    "executive/contracts",
    "hooks",
    "snapshots/auto"
  ],
  "modules": [
    {
      "id": "M112A",
      "name": "Adaptive Matchup Matrix",
      "enabled": true,
      "inputs": {
        "matchup_dir": "LeafsAI/Matchups/",
        "analytics_dir": "snapshots/auto/",
        "pattern_memory_glob": "analytics/opponent/*_PatternMemory_*.json"
      },
      "config": {
        "history_games": 3,
        "learn_fields": [
          "entries_type",
          "slot_chances",
          "pp_setup",
          "rush_chances",
          "point_shots"
        ],
        "auto_adjust": {
          "neutral_zone": ["1-3-1", "1-2-2 Red", "1-2-2 Blue"],
          "def_pressure": ["Normal", "Tight Point", "Puck Side Attack", "High Pressure"],
          "quick_breakout": ["Close Support", "Stay Wide", "Leave Zone Early"]
        }
      },
      "output": "analytics/opponent/AdaptiveMatrix_{opponent}_{date}.json"
    },
    {
      "id": "M113C",
      "name": "Contract Forecast Engine",
      "enabled": true,
      "triggers": [
        "weekly",
        "command:/financial_outlook",
        "command:/contracts_forecast"
      ],
      "inputs": {
        "contracts_file": "LeafsAI/LeafsContracts_seed_v1.1.json",
        "roster_file": "LeafsAI/LeafsRoster_master_v1.2.json",
        "finance_file": "LeafsAI/Finance_seed.json",
        "chemistry_file": "elite/chemistry_latest.json"
      },
      "config": {
        "horizon_years": 3,
        "weights": {
          "war": 0.35,
          "age_curve": 0.15,
          "role_importance": 0.2,
          "chemistry": 0.1,
          "market_inflation": 0.2
        },
        "outputs": [
          "projected_aav",
          "term_band",
          "walkaway_price",
          "renewal_window_hint"
        ],
        "guardrails": {
          "cap_buffer_min_m": 0.5,
          "protect_core": ["Matthews", "Marner", "Nylander", "Rielly", "Woll"]
        }
      },
      "output": "executive/contracts/Forecast_{season}.json"
    },
    {
      "id": "VHOOK",
      "name": "Canon Auto-Verify Hook",
      "enabled": true,
      "hook": "post:/lock_strategies",
      "inputs": {
        "canon_files": [
          "Architect/Architect_Config_v6.1.json",
          "LeafsAI/Canon_v4.1_Full_Franchise.json",
          "LeafsAI/LeafsSeeds_Master_v4.1.json"
        ],
        "schema_dir": "Architect/"
      },
      "config": {
        "checksum": "sha256",
        "fail_action": "abort_lock_and_log",
        "log_path": "hooks/canon_verify_log.txt"
      },
      "output": "hooks/canon_verify_status.json"
    }
  ],
  "automation": {
    "weekly_tasks": [
      "contracts_forecast_refresh",
      "adaptive_matrix_refresh",
      "snapshot_auto_save"
    ],
    "post_game_pipeline": [
      "pattern_learn_update",
      "adaptive_matrix_apply",
      "snapshot_auto_save"
    ]
  },
  "git": {
    "tag": "v4.9-DynastyMax",
    "commit_message": "feat: Dynasty Max v4.9 â€” M112A Adaptive Matchup Matrix, M113C Contract Forecast, Canon Auto-Verify Hook (no Canon edits)"
  },
  "post_install_commands": [
    "/verify_patch",
    "/qa_weekly --tasks \"contracts_forecast_refresh, adaptive_matrix_refresh\"",
    "/analytics_report --range last_game",
    "/resync_baseline --from \"Matchup_Default_v4.8_UI\""
  ]
}